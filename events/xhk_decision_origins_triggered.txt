namespace = xhk_decision_origin_triggered

#Add ToL to new colonies
planet_event = {
	id = xhk_decision_origin_triggered.1
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = decision_origins_tree_of_life
		}
	}

	immediate = {
		add_deposit = d_tree_of_life_colony
		remove_modifier = no_lifetree #as the planet transfer events fire before this
	}
}

#Tree destroyed (oh no!)
#silently kill tree
planet_event = {
	id = xhk_decision_origin_triggered.2
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		OR = {
			has_deposit = d_tree_of_life_colony
			has_deposit = d_tree_of_life_home
		}
	}

	immediate = {
		remove_deposit = d_tree_of_life_colony
		remove_deposit = d_tree_of_life_home
	}
}

#informatively kill tree
planet_event = {
	id = xhk_decision_origin_triggered.3
	title = "origin.3003.name"
	desc = "origin.3003.desc"
	picture = GFX_evt_burning_city
	show_sound = event_alien_nature

	is_triggered_only = yes

	trigger = {
		planet_devastation >= 50
		OR = {
			has_deposit = d_tree_of_life_colony
			has_deposit = d_tree_of_life_home
		}
	}

	immediate = {
		remove_deposit = d_tree_of_life_colony
		remove_deposit = d_tree_of_life_home
	}

	option = {
		name = UNFORTUNATE
		tooltip = {
			remove_deposit = d_tree_of_life_colony
			remove_deposit = d_tree_of_life_home
		}
		add_modifier = { modifier = no_lifetree }
	}
}

#modify the modifier for lacking Tree
planet_event = {
	id = xhk_decision_origin_triggered.4
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		NOT = { days_passed < 30 }
		OR = {
			AND = {
				owner = { has_country_flag = decision_origins_tree_of_life }
				NOR = {
					has_deposit = d_tree_of_life_colony
					has_deposit = d_tree_of_life_home
					has_modifier = no_lifetree
				}
			}
			AND = {
				owner = { NOT = { has_country_flag = decision_origins_tree_of_life } }
				has_modifier = no_lifetree
			}
		}
	}

	immediate = {
		if = {
			limit = {
				owner = { has_country_flag = decision_origins_tree_of_life }
				NOT = {
					has_deposit = d_tree_of_life_colony
					has_deposit = d_tree_of_life_home
				}
			}
			add_modifier = { modifier = no_lifetree }
		}
		if = {
			limit = {
				owner = { NOT = { has_country_flag = decision_origins_tree_of_life } }
			}
			remove_modifier = no_lifetree
		}
	}
}