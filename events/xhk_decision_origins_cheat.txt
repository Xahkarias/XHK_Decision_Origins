namespace = xhk_decision_galaxis

## SPAWN SPECIES WITH QUICK BREEDERS
country_event = {
	id = xhk_decision_galaxis.1
	hide_window = yes
	is_triggered_only = yes


	immediate = {
		set_country_flag = decision_origins_syncretic_evolution

		capital_scope = {

			if = {
				limit = { owner = { has_civic = civic_machine_assimilator } }
				# make them cybernetic
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_rapid_breeders
						trait = trait_cybernetic
					}
				}
			}
			else_if = {
				limit = { owner = { is_hive_empire = yes } }
				# make them hive
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_rapid_breeders
						trait = trait_hive_mind
					}
				}
			}
			else = {
				# make them normal
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_rapid_breeders
					}
				}
			}


			create_pop_group = {
				size = 1200
				species = last_created_species
			}
			
			# if hive
			if = {
				limit = { owner = { is_hive_empire = yes } }
				last_created_species = {
					set_citizenship_type = {
						country = root.owner
						type = citizenship_full
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}
			}
			# if assimilator
			else_if = {
				limit = { owner = { has_civic = civic_machine_assimilator } }

				last_created_species = {
					set_citizenship_type = {
						country = root.owner
						type = citizenship_full_machine
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}

			}
			# otherwise
			else = {
				last_created_species = {
					# try to force slavery
					set_citizenship_type = {
						country = root.owner
						type = citizenship_slavery
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}
			}
		}
	}

}

## SPAWN SHATTERED RING SYSTEM NEARBY
country_event = {
	id = xhk_decision_galaxis.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_country_flag = decision_origins_shattered_ring
		capital_scope = {
			spawn_system = {
				min_distance = 10
				max_distance = 30
				max_jumps = 0
				initializer = shattered_ring_start
			}
			if = {
				limit = { last_created_system = { NOT = { has_hyperlane_to = prev } } }
				add_hyperlane = {
					from = this
					to = last_created_system
				}
			}
			else = {
				add_extra_hyperlane_to_spawned_system_effect = yes
			}
		}
	}
}