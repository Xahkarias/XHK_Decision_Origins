namespace = xhk_decision_origins


## TREE OF LIFE
country_event = {
	id = xhk_decision_origins.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = decision_origins_tree_of_life
		add_modifier = { modifier = xhk_decori_tree_life_modifier }
		## add deposit and pops
		capital_scope = {
			add_deposit = d_tree_of_life_home
		}
	}
}

## SYNCRETIC EVOLUTION
country_event = {
	id = xhk_decision_origins.12
	hide_window = yes
	is_triggered_only = yes


	immediate = {
		set_country_flag = decision_origins_syncretic_evolution
		

		capital_scope = {

			if = {
				limit = { owner = { has_civic = civic_machine_assimilator } }
				# make them cybernetic
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_syncretic_proles
						trait = trait_cybernetic
					}
				}
			}
			else_if = {
				limit = { owner = { is_hive_empire = yes } }
				# make them hive
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_syncretic_proles
						trait = trait_hive_mind
					}
				}
			}
			else = {
				# make them normal
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_syncretic_proles
					}
				}
			}


			create_pop_group = {
				size = 1200
				species = last_created_species
			}
			
			# if hive
			if = {
				limit = { owner = { is_hive_empire = yes } }
				last_created_species = {
					set_citizenship_type = {
						country = root.owner
						type = citizenship_full
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}
			}
			# if assimilator
			else_if = {
				limit = { owner = { has_civic = civic_machine_assimilator } }

				last_created_species = {
					set_citizenship_type = {
						country = root.owner
						type = citizenship_full_machine
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}

			}
			# otherwise
			else = {
				last_created_species = {
					# try to force slavery
					set_citizenship_type = {
						country = root.owner
						type = citizenship_slavery
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}
			}
		}
	}

}