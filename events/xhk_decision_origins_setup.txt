namespace = xhk_decision_origins

## PROSPEROUS UNIFICATION
country_event = {
	id = xhk_decision_origins.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = decision_origins_prosperous_unification
		## add deposit and pops
		capital_scope = {
			# this is for compatibility with any form of district set, simply gives 2 extra district slots
			add_deposit = xhk_d_prosp_unif

			create_pop_group = {
				size = 400
				species = owner_main_species
			}		
		}
		
		## add buff
		if = {
			limit = {
				is_gestalt = no
			}
			capital_scope = {
				add_modifier = { modifier = prosp_uni_mod days = 7200 }
			}
		}
		else = {
			capital_scope = {
				add_modifier = { modifier = prosp_uni_mod_gestalt days = 7200 }
			}
		}
	}
}

## TREE OF LIFE
country_event = {
	id = xhk_decision_origins.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = decision_origins_tree_of_life
		add_modifier = { modifier = xhk_decori_tree_life_modifier }
		## add deposit and pops
		capital_scope = {
			add_deposit = d_tree_of_life_home
		}
	}
}

## MECHANIST
country_event = {
	id = xhk_decision_origins.10
	hide_window = yes
	is_triggered_only = yes


	immediate = {
		set_country_flag = decision_origins_mechanist

		capital_scope = {
			add_building = {
				zone = slot_city_government
				building = building_robot_assembly_plant
			}
		}

		give_technology = {
			tech = tech_powered_exoskeletons
		}
		give_technology = {
			tech = tech_robotic_workers
		}
		add_tech_progress = {
			tech = tech_robomodding
			progress = 0
		}
		add_modifier = {
			modifier = xhk_decori_mechanists_modifier
		}
	}
}

## SYNCRETIC EVOLUTION
country_event = {
	id = xhk_decision_origins.12
	hide_window = yes
	is_triggered_only = yes


	immediate = {
		set_country_flag = decision_origins_syncretic_evolution
		

		capital_scope = {

			if = {
				limit = { owner = { has_civic = civic_machine_assimilator } }
				# make them cybernetic
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_syncretic_proles
						trait = trait_cybernetic
					}
				}
			}
			else_if = {
				limit = { owner = { is_hive_empire = yes } }
				# make them hive
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_syncretic_proles
						trait = trait_hive_mind
					}
				}
			}
			else = {
				# make them normal
				create_species = {
					name = random
					class = random
					namelist = random
					portrait = random
					homeworld = planet
					traits = {
						trait = trait_syncretic_proles
					}
				}
			}


			create_pop_group = {
				size = 1200
				species = last_created_species
			}
			
			# if hive
			if = {
				limit = { owner = { is_hive_empire = yes } }
				last_created_species = {
					set_citizenship_type = {
						country = root.owner
						type = citizenship_full
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}
			}
			# if assimilator
			else_if = {
				limit = { owner = { has_civic = civic_machine_assimilator } }

				last_created_species = {
					set_citizenship_type = {
						country = root.owner
						type = citizenship_full_machine
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}

			}
			# otherwise
			else = {
				last_created_species = {
					# try to force slavery
					set_citizenship_type = {
						country = root.owner
						type = citizenship_slavery
					}
					# modify_species = {
					# 	species = this
					# 	ideal_planet_class = home_planet
					# }
				}
			}
		}
	}

}