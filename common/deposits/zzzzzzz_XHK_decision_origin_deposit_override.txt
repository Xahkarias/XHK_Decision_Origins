# REMNANTS
d_ruined_arcology = {
	time = 360
	icon = d_city_ruins

	is_for_colonizable = yes
	category = deposit_cat_blockers

	potential = { always = no }

	planet_modifier = {
		planet_max_districts_add = -1
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 750
			minerals = 250
		}
	}

	on_cleared = {
		if = {
			limit = {
				exists = owner
				owner = {
					has_ancrel = yes
				}
			}

			custom_tooltip = minor_artifacts_found
			random_list = {
				33 = {
					owner = { add_resource = { minor_artifacts = 50 } }
				}
				33 = {
					owner = { add_resource = { minor_artifacts = 150 } }
				}
				33 = {
					owner = { add_resource = { minor_artifacts = 250 } }
				}
			}

			if = {
				limit = {
					owner = {
						NOT = { has_country_flag = league_world_found }
					}
					planet = { has_modifier = first_league_homeworld }
				}
				hidden_effect = {
					owner = {
						set_country_flag = league_world_found
					}
				}
				custom_tooltip = league_artifact_research_unlocked
			}
		}
		if = {
			limit = {
				exists = owner
				owner = { 
					OR =  {
						has_origin = origin_remnants
						## ADDED THIS
						has_country_flag = decision_origins_remnants
					}  
				}
				is_capital = yes
			}
			custom_tooltip = rediscover_tech
			hidden_effect = {
				owner = {
					country_event = { id = origin.3100 }
				}
			}
		}
	}

	ai_weight = {
		weight = 2
	}
}

# CALAMITOUS BIRTH
d_buried_lithoids = {
    icon = d_buried_lithoids
    time = 360

    is_for_colonizable = yes
    category = deposit_cat_rare_blocker

    potential = { always = no }

    on_cleared = {
        if = {
            limit = {
                NOT = { owner = { has_calamitous_birth_origin = yes } }
            }
            owner = { add_resource = { minerals = 300 } }
        }

        if = {
            limit = {
                owner = { has_calamitous_birth_origin = yes }
            }
            create_pop_group = {
                species = owner
            }
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            trigger = {
                NOT = { owner = { has_calamitous_birth_origin = yes } }
            }
            energy = 300
        }
        cost = {
            trigger = {
                owner = { has_calamitous_birth_origin = yes }
            }
            minerals = 1000
        }
    }

    ai_weight = {
        weight = 2

        modifier = {
            factor = 0
            AND = {
                owner = { has_calamitous_birth_origin = yes }
                from = { num_unemployed > 0 }
            }
        }
    }
}

d_buried_lithoids_overlord = {
    icon = d_buried_lithoids
    time = 360

    is_for_colonizable = yes
    category = deposit_cat_rare_blocker

    potential = { always = no }

    on_cleared = {
        if = {
            limit = {
                NOT = { owner.overlord = { has_calamitous_birth_origin = yes } }
            }
            owner = { add_resource = { minerals = 300 } }
        }

        if = {
            limit = {
                owner.overlord = { has_calamitous_birth_origin = yes }
            }
            create_pop_group = {
                species = owner.overlord
            }
        }
    }

    ai_weight = {
        weight = 2

        modifier = {
            factor = 0
            AND = {
                owner.overlord = { has_calamitous_birth_origin = yes }
                from = { num_unemployed > 0 }
            }
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            trigger = {
                NOT = { owner = { has_calamitous_birth_origin = yes } }
            }
            energy = 300
        }
        cost = {
            trigger = {
                owner = { has_calamitous_birth_origin = yes }
            }
            minerals = 1000
        }
    }

    ai_weight = {
        weight = 2
    }
}

d_lithoid_crater = {
    is_for_colonizable = yes
    category = deposit_cat_rare

    icon = d_crater

    potential = {
        exists = owner
        owner = {
            has_calamitous_birth_origin = yes
        }
    }

    planet_modifier = {
        planet_max_districts_add = 6
        district_farming_max_add = -6
        logistic_growth_mult = 0.25
        district_mining_max_add = 6
    }

    custom_tooltip = d_lithoid_crater_custom_tooltip

    drop_weight = {
        weight = 0
    }
}

# Cosmic Dawn - Stasis Pod
d_stasis_pods = {
    icon = d_ancient_vault
    time = 360
    is_for_colonizable = yes
    category = deposit_cat_rare_blocker
    potential = { always = no }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 750
        }
        produces = {
            society_research = 3 #if changed, adjust concept_inf_cd_deposit_desc
        }
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = { owner = { has_cosmic_dawn_origin = yes } }
                create_pop_group = { species = owner }
            }
            else = {
                owner = { add_resource = { society_research = 350 } }
            }
            if = {
                limit = { NOT = { has_deposit = d_cd_ancient_tunnels } }
                add_deposit = d_cd_ancient_tunnels
            }
            change_variable = { which = cd_pods_var value = 1 }
        }
        custom_tooltip = d_stasis_pods_tt
    }

    inline_script = deposits/ai_weight_pop_creating_blocker
}

