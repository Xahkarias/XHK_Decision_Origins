tr_synthetics_adopt = {
	possible = {
		if = {
			limit = { 
				has_synthetic_fertility_origin = yes	
			}
			has_technology = tech_synthetic_workers
		}
		else_if = {
			limit = {
				has_machine_age_dlc = yes
				is_machine_empire = no
				is_individual_machine = no
			}
			has_ascension_perk = ap_synthetic_evolution
			has_technology = tech_synthetic_workers
		}
		else = { # No Machine Age DLC
			if = {
				limit = {
					is_machine_empire = no
				}
				has_ascension_perk = ap_synthetic_evolution
				has_technology = tech_synthetic_workers
			}
			else = {
				has_ascension_perk = ap_synthetic_age
				has_technology = tech_robomodding_m
			}
		}
	}

	unlocks_agenda = agenda_synthetic_yield
	custom_tooltip_with_modifiers = tr_synthetics_adopt_desc

	on_enabled = { # has_machine_age_dlc = yes
		if = {
			limit = {
				NOT = {
					has_technology = tech_synthetic_leaders
				}
			}
			add_tech_progress = {
				tech = tech_synthetic_leaders
				progress = 0.1
			}
		}
		hidden_effect = {
			if = {
				limit = { 
					has_synthetic_fertility_origin = yes
				}
				country_event = { id = machine_age.3125 }
			}
			else = {
				country_event = { id = synth.1 }
			}
			if = {
				limit = {
					any_planet_within_border = {
						has_planet_flag = fotd_seperatist_planet@root
						owner = {
							has_country_flag = fotd_seperatist_country@root
						}
					}
				}
				country_event = { id = origin.6099 days = 5 random = 2 }
			}
		}
	}

	tradition_swap = { # has_machine_age_dlc = no
		inherit_name = yes
		inherit_icon = yes
		trigger = {
			has_machine_age_dlc = no
			is_machine_empire = no
		}

		custom_tooltip = tr_synthetics_adopt_utopia_desc

		on_enabled = {
			if = {
				limit = {
					NOT = {
						has_technology = tech_synthetic_leaders
					}
				}
				add_tech_progress = {
					tech = tech_synthetic_leaders
					progress = 0.1
				}
			}
			hidden_effect = {
				country_event = { id = utopia.2550 }
				if = {
					limit = {
						any_planet_within_border = {
							has_planet_flag = fotd_seperatist_planet@root
							owner = {
								has_country_flag = fotd_seperatist_country@root
							}
						}
					}
					country_event = { id = origin.6099 days = 5 random = 2 }
				}
			}
		}
		weight = {
			factor = 1
		}
	}

	tradition_swap = {
		name = tr_synthetics_adopt_machine
		inherit_name = yes
		inherit_icon = yes
		trigger = {
			OR = {
				has_machine_age_dlc = no
				is_machine_empire = yes
			}
		}
		modifier = {
			pop_environment_tolerance = 0.25
		}
		weight = {
			factor = 1
		}
	}
}

tr_psionics_adopt = {
	possible = {
		if = {
			limit = {
				OR = {
					has_origin = origin_shroudwalker_apprentice
					has_country_flag = ratling_country
					has_country_flag = decision_origins_shroudwalker_apprentice
				}
			}
			has_technology = tech_psionic_theory
		}
		else = {
			has_ascension_perk = ap_mind_over_matter
			has_technology = tech_psionic_theory
		}
	}
	unlocks_agenda = agenda_psionic_supremacy
	custom_tooltip = tr_psionics_adopt_tooltip
	on_enabled = {
		country_event = {
			id = utopia.2600
		}
	}
	# Grants the Latent Psionic trait

	tradition_swap = {
		name = tr_psionics_adopt_shroudwalker
		inherit_name = yes
		inherit_icon = yes
		trigger = {
			has_origin = origin_shroudwalker_apprentice
		}
		custom_tooltip = tr_psionics_adopt_shroudwalker_tooltip
		on_enabled = {
			add_research_option = tech_telepathy
			country_event = {
				id = utopia.2600
			}
		}
		weight = {
			factor = 1
		}
	}
}

tr_psionics_shroud_adopt = {
	possible = {
		if = {
			limit = {
				OR = {
					has_origin = origin_shroudwalker_apprentice
					has_origin = origin_endbringers
					has_country_flag = ratling_country
					has_country_flag = finish_shroud_forged_liberation_flag
					has_country_flag = decision_origins_shroudwalker_apprentice
				}
			}
			has_technology = tech_psionic_theory
		}
		else = {
			has_ascension_perk = ap_mind_over_matter
			has_technology = tech_psionic_theory
			if = {
				limit = {
					has_origin = origin_shroud_forged
				}
				custom_tooltip = tr_psionics_shroud_forged_requirement
			}
		}
	}
	unlocks_agenda = agenda_psionic_supremacy_shroud
	custom_tooltip = tr_psionics_shroud_adopt_desc

	on_enabled = {
		if = {
			limit = {
				has_origin = origin_endbringers
			}
			country_event = {
				id = shroud.8310
			}
		}
		else = {
			country_event = {
				id = shroud.2750
			}
		}
	}
	# Grants the Latent Psionic trait

	tradition_swap = {
		name = tr_psionics_adopt_shroudwalker
		inherit_name = yes
		inherit_icon = yes
		trigger = {
			has_origin = origin_shroudwalker_apprentice
		}
		custom_tooltip = tr_psionics_shroud_adopt_shroudwalker_desc
		on_enabled = {
			add_research_option = tech_telepathy
			country_event = {
				id = shroud.2750
			}
		}
		weight = {
			factor = 1
		}
	}
}
